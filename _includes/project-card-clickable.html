{% assign p = include.project %}

<div class="grid__item one-third">
  <div class="archive__item-wrap">
    <!-- Full-card clickable surface (Details) -->
    <a class="archive__item archive__item--link"
       href="{{ p.url | relative_url }}"
       itemscope itemtype="https://schema.org/CreativeWork"
       aria-label="{{ p.title | escape }}">

      {% if p.header.teaser %}
        <div class="archive__item-teaser">
          <img src="{{ p.header.teaser | relative_url }}" alt="">
        </div>
      {% endif %}

      <h2 class="archive__item-title" itemprop="headline">
        {{ p.title }}
      </h2>

      {% if p.excerpt %}
        <p class="archive__item-excerpt" itemprop="description">
          {{ p.excerpt | markdownify | strip_html | truncate: 160 }}
        </p>
      {% endif %}

      <div class="archive__item-cta">
        <span class="btn btn--primary">Details</span>
      </div>
    </a>

    <!-- Secondary actions (not inside the link) -->
    {% if p.gem_url or p.code_url or p.demo_url %}
      <div class="archive__item-actions">
        {% if p.gem_url %}
          <a class="btn" href="{{ p.gem_url }}" target="_blank" rel="noopener">Gem</a>
        {% endif %}

        {% if p.code_url %}
          <a class="btn" href="{{ p.code_url }}" target="_blank" rel="noopener">Code</a>
        {% endif %}

        {% if p.demo_url %}
          <a class="btn" href="{{ p.demo_url }}" target="_blank" rel="noopener">Demo</a>
        {% endif %}
      </div>
    {% endif %}
  </div>
</div>
